{"ast":null,"code":"import _objectSpread from\"/Users/mitsuo.moto/work/ENG_MTG/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/mitsuo.moto/work/ENG_MTG/react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import todoService from'../services/todos';import{uuid}from\"uuidv4\";export default function useTodo(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];useEffect(function(){todoService.getAll().then(function(todos){setTodos(todos.reverse());});},[]);var toggleTodo=function toggleTodo(id,completed){console.log(id);console.log(completed);var todo=todos.find(function(todo){return todo.id===id;});var newTodo=_objectSpread(_objectSpread({},todo),{},{completed:!completed});todoService.update(id,newTodo).then(function(updateTodo){var newTodos=todos.map(function(todo){return todo.id!==updateTodo.id?todo:updateTodo;});setTodos(newTodos);});};var deleteTodo=function deleteTodo(id){console.log('delete: '+id);todoService.delete(id).then(function(deletedTodoId){var newTodos=todos.filter(function(todo){return todo.id!==deletedTodoId;});setTodos(newTodos);});};var addTodo=function addTodo(todo){console.log('add: '+todo);var newTodo={title:todo,completed:false,id:uuid()};return todoService.add(newTodo).then(function(addedTodo){setTodos([addedTodo].concat(todos));});};return{todos:todos,toggleTodo:toggleTodo,deleteTodo:deleteTodo,addTodo:addTodo};}","map":{"version":3,"sources":["/Users/mitsuo.moto/work/ENG_MTG/react/src/hooks/useTodo.js"],"names":["useState","useEffect","todoService","uuid","useTodo","todos","setTodos","getAll","then","reverse","toggleTodo","id","completed","console","log","todo","find","newTodo","update","updateTodo","newTodos","map","deleteTodo","delete","deletedTodoId","filter","addTodo","title","add","addedTodo","concat"],"mappings":"uTAAA,OAAQA,QAAR,CAAkBC,SAAlB,KAAkC,OAAlC,CAGA,MAAOC,CAAAA,WAAP,KAAwB,mBAAxB,CACA,OAAQC,IAAR,KAAmB,QAAnB,CAGA,cAAe,SAASC,CAAAA,OAAT,EAAmB,CAE9B,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eAEAL,SAAS,CAAC,UAAM,CACZC,WAAW,CAACK,MAAZ,GAAqBC,IAArB,CAA0B,SAAAH,KAAK,CAAI,CAC/BC,QAAQ,CAACD,KAAK,CAACI,OAAN,EAAD,CAAR,CACH,CAFD,EAGH,CAJQ,CAIN,EAJM,CAAT,CAMA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,EAAD,CAAKC,SAAL,CAAmB,CAClCC,OAAO,CAACC,GAAR,CAAYH,EAAZ,EACAE,OAAO,CAACC,GAAR,CAAYF,SAAZ,EACA,GAAMG,CAAAA,IAAI,CAAGV,KAAK,CAACW,IAAN,CAAW,SAAAD,IAAI,QAAIA,CAAAA,IAAI,CAACJ,EAAL,GAAYA,EAAhB,EAAf,CAAb,CACA,GAAMM,CAAAA,OAAO,gCAAOF,IAAP,MAAaH,SAAS,CAAE,CAACA,SAAzB,EAAb,CAGAV,WAAW,CAACgB,MAAZ,CAAmBP,EAAnB,CAAuBM,OAAvB,EAAgCT,IAAhC,CAAqC,SAAAW,UAAU,CAAI,CAC/C,GAAMC,CAAAA,QAAQ,CAAGf,KAAK,CAACgB,GAAN,CAAU,SAAAN,IAAI,QAC3BA,CAAAA,IAAI,CAACJ,EAAL,GAAYQ,UAAU,CAACR,EAAvB,CAA4BI,IAA5B,CAAmCI,UADR,EAAd,CAAjB,CAGAb,QAAQ,CAACc,QAAD,CAAR,CACH,CALD,EAMH,CAbD,CAgBA,GAAME,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAAX,EAAE,CAAI,CACrBE,OAAO,CAACC,GAAR,CAAY,WAAaH,EAAzB,EAEAT,WAAW,CAACqB,MAAZ,CAAmBZ,EAAnB,EAAuBH,IAAvB,CAA4B,SAAAgB,aAAa,CAAI,CACzC,GAAMJ,CAAAA,QAAQ,CAAGf,KAAK,CAACoB,MAAN,CAAa,SAAAV,IAAI,QAAIA,CAAAA,IAAI,CAACJ,EAAL,GAAYa,aAAhB,EAAjB,CAAjB,CACAlB,QAAQ,CAACc,QAAD,CAAR,CACH,CAHD,EAIH,CAPD,CASA,GAAMM,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAAX,IAAI,CAAI,CACpBF,OAAO,CAACC,GAAR,CAAY,QAAUC,IAAtB,EACA,GAAME,CAAAA,OAAO,CAAG,CACZU,KAAK,CAAEZ,IADK,CAEZH,SAAS,CAAE,KAFC,CAGZD,EAAE,CAAER,IAAI,EAHI,CAAhB,CAMA,MAAOD,CAAAA,WAAW,CAAC0B,GAAZ,CAAgBX,OAAhB,EAAyBT,IAAzB,CAA8B,SAAAqB,SAAS,CAAI,CAC9CvB,QAAQ,CAAC,CAACuB,SAAD,EAAYC,MAAZ,CAAmBzB,KAAnB,CAAD,CAAR,CACH,CAFM,CAAP,CAGH,CAXD,CAaA,MAAO,CAAEA,KAAK,CAALA,KAAF,CAASK,UAAU,CAAVA,UAAT,CAAqBY,UAAU,CAAVA,UAArB,CAAiCI,OAAO,CAAPA,OAAjC,CAAP,CACH","sourcesContent":["import {useState, useEffect} from 'react';\n\n\nimport todoService from '../services/todos';\nimport {uuid} from \"uuidv4\";\n\n\nexport default function useTodo() {\n\n    const [todos, setTodos] = useState([]);\n\n    useEffect(() => {\n        todoService.getAll().then(todos => {\n            setTodos(todos.reverse());\n        });\n    }, []);\n\n    const toggleTodo = (id, completed) => {\n        console.log(id);\n        console.log(completed);\n        const todo = todos.find(todo => todo.id === id);\n        const newTodo = {...todo, completed: !completed};\n\n\n        todoService.update(id, newTodo).then(updateTodo => {\n            const newTodos = todos.map(todo =>\n                todo.id !== updateTodo.id ? todo : updateTodo\n            );\n            setTodos(newTodos);\n        });\n    };\n\n\n    const deleteTodo = id => {\n        console.log('delete: ' + id);\n\n        todoService.delete(id).then(deletedTodoId => {\n            const newTodos = todos.filter(todo => todo.id !== deletedTodoId);\n            setTodos(newTodos);\n        });\n    };\n\n    const addTodo = todo => {\n        console.log('add: ' + todo);\n        const newTodo = {\n            title: todo,\n            completed: false,\n            id: uuid()\n        };\n\n        return todoService.add(newTodo).then(addedTodo => {\n            setTodos([addedTodo].concat(todos));\n        });\n    }\n\n    return { todos, toggleTodo, deleteTodo, addTodo};\n}"]},"metadata":{},"sourceType":"module"}